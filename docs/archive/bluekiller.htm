<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title></title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .s1 { color: #00F; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 21.5pt; }
 .s2 { color: #000080; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s3 { color: #F00; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s4 { color: #00F; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 p { color: black; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; margin:0pt; }
 .s5 { color: #F00; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s6 { color: #F00; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s7 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s8 { color: #154BA0; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: underline; font-size: 8pt; }
 .s9 { color: #333; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s10 { color: #154BA0; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s11 { color: #8A0000; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s12 { color: #F0F; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s13 { color: #800080; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s14 { color: black; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s15 { color: black; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s16 { color: #F00; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s17 { color: #154BA0; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 table, tbody {vertical-align: top; overflow: visible; }
</style></head><body><p class="s1" style="padding-top: 1pt;padding-left: 65pt;text-indent: 0pt;line-height: 25pt;text-align: center;">游戏汉化教学贴</p><p class="s2" style="padding-left: 166pt;text-indent: 0pt;line-height: 11pt;text-align: left;">更新至[第五篇 GIM图像的破解 第二篇 进阶篇]－bluekiller</p><p class="s3" style="padding-top: 9pt;padding-left: 65pt;text-indent: 0pt;text-align: center;">文本的导入导出基础篇</p><p class="s4" style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">文本的导入和导出基础篇</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">作为游戏文本导出的最基本的工具，我们可以使用网上享有盛名的WQSG v1.0.2007.03110版和 CrystalScript文本导入和导出工具。（以后简称WQ和CS）</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">当然这2个工具未必能覆盖所有的PSP游戏的文本导入和导出，本章介绍的是一个汉化的流程或者说是基本的方法，大家在熟悉方法后，可以自己写一些程序提高导入导出的效率。汉化是一件需要耐心、毅   力、时间、技术、合作的工作，当你想汉化一个游戏的时候，你要做好充分的准备。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">案例：圣女贞德（日版）</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">解包圣女贞德日版的ISO。剧情文本在 PSP_GAME\USRDIR\DATA\EVENT</p><p class="s4" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">文本的导出</p><p style="text-indent: 0pt;text-align: left;"><span><img width="371" height="394" alt="image" src="bluekiller_files/Image_001.jpg"/></span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">步骤1 <span style=" color: #000;">启动WQ。</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;"><span style=" color: #00F;">步骤2  </span>在<span style=" color: #F00;">rom</span>按钮处加载需要导出文本的文件，我们以圣女的剧情文本ST1020AB.BIN文件为例子。码表就是游戏的文本编码，当然在这里我可以告诉你圣女贞德的码表是SJIS。每个游戏的文本编码不一定是  SJIS，也可能是unicode编码，也有可能是unicode编码的扩展UTF-8编码，扯远了，基于后两种编码的导出，这里不作介绍，留给进阶者自己思考把。</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: justify;">步骤3     <span style=" color: #000;">好，码表选择后的下一步就是选择控制符码表，控制符的目的就是游戏文本导出后的每行文本显示的上下句连接是否采用回车等，方便以后翻译汉化的语句调整，加了控制符，一般的翻译都能胜任，没有控制符，文本也能导出，但是会出现上下句文本语序的倒置，因为大家都知道日文和中文的语序不一样的。至于控制符，也属于进阶范围，需要有一定的程序基础，每个游戏的控制符不一，需要灵活应用，这里也就不再介绍。</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">步骤 4 <span style=" color: #000;">在开始的16进制地址填写0。</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">步骤 5 <span style=" color: #000;">在结束的16进制地址用取段最大按钮，获得ST1020AB.BIN的字节数，也就是说ST1020AB.BIN的容量。</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">步骤 6 <span style=" color: #000;">字节过滤填入2，一般日文SJIS都是双字节，所以一个日文字符是占用2个字节，我们设置为小于等于2，小于2的文字不导出。</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">步骤 7 <span style=" color: #000;">开始导出，替导出的文本取名ST1020AB.BIN.txt，这样，剧情文本ST1020AB.BIN的文本就导出了，是不是很简单？</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">这里放上导出的文本后翻译后的文本对照。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="644" height="191" alt="image" src="bluekiller_files/Image_002.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">文本翻译后的检查</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">基于文本的越界，日文字符显示等wq做的比较完善，但是用起来还是比较麻烦，建议自己开发些工具进行修正。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="459" height="291" alt="image" src="bluekiller_files/Image_003.jpg"/></span></p><p class="s4" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">1、文本日文字符检查</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="357" height="164" alt="image" src="bluekiller_files/Image_004.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">启动 jpcheck 1.1 ,按下检查按钮，加载翻译好的ST1020AB.BIN.txt，如果ST1020AB.BIN文本中有没有汉化的字符，程序会显示该句文本。根据offset可以查到ST1020AB.BIN文本中未翻译的日文。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 22pt;text-align: left;">问题：如果不检查，汉化后游戏中出现未汉化的文本。 <span style=" color: #00F;">2、文本格式检查</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 9pt;text-align: left;">现在我们看到的导出文本格式，都是基于汉化前辈施大侠当时提出的文本格式：偏址+字节+文本，即</p><p class="s5" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">xxxxxxxx,xxx,文本</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">在文本分发翻译后，翻译在翻译过程中难免发生破坏格式的情况，如：<span class="s6">xxxxxxxxxxx,文本</span>以及</p><p class="s5" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">xxxxxxxx,xxx文本</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">启动文本格式检查器formatcheck 1.1，分别按下第9列和剩余列按钮加载翻译好的文本，检查文本格式是否有破坏的情况。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="455" height="476" alt="image" src="bluekiller_files/Image_005.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">问题：如果不检查，本句文本不会被导入或者破坏被导入的文件。</p><p class="s4" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">3、文本字符越界检查</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">翻译过程中，由于为了表达清楚日文文本的含义，可能出现文本字符越界。为此需要进行检查。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">启动offsetcheck1.2，由于圣女编码是sjis，属于双字节，为此我们按下双字节按钮，加载翻译好的文本进行检查，如果是utf-8编码则采用三字节按钮进行检查。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="458" height="372" alt="image" src="bluekiller_files/Image_006.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">如果文本加入了控制符，我们还可以通过下面的控制符占用字节数进行设定。保证文本不越界。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">问题：本句以下的文本不能被导入或者越界的部分不被导入。</p><p class="s4" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">文本导入</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">在上述文本检查合格后，我们可以导入文本了。启动wq。按上图的步骤完成文本的导入。至于不足部分可以用单字节20或者单字节20+双字节8140进行填充。</p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="375" height="394" alt="image" src="bluekiller_files/Image_007.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">汉化的文本字符未必都是码表中的字符，导入过程中当码表中没有的字符会提示，这时还需进行修正。直至导入过程中没有提示信息，即认为大功告成。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(备注：码表中不能显示的字符工具还没写：）)</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">问题：码表中没有的字符，本句以下的文本不能被导入，或者该字符在游戏中不能被显示。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_008.png"/></span> <span class="s8">WQ2007-03-11版本.rar</span></p><p class="s9" style="padding-left: 13pt;text-indent: 0pt;line-height: 9pt;text-align: left;">文本导入导出器</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 13pt;text-indent: -8pt;line-height: 79%;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_009.png"/></span> <span class="s8">JP2GBK.rar</span><span class="s10"> </span><span class="s9">SJIS码表</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 13pt;text-indent: -8pt;line-height: 79%;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_010.png"/></span> <span class="s8">WinhexV131.2SR-11.rar</span><span class="s10"> </span><span class="s9">16进制编辑器</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_011.png"/></span> <span class="s8">0JPCheck.rar</span></p><p class="s9" style="padding-left: 13pt;text-indent: 0pt;line-height: 9pt;text-align: left;">日文片、平假名字符检查器</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 13pt;text-indent: -8pt;line-height: 79%;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_012.png"/></span> <span class="s8">0FTCheck.rar</span><span class="s9">文本格式检查器</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s7" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_013.png"/></span> <span class="s8">简转繁.rar</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 3pt;padding-left: 65pt;text-indent: 0pt;text-align: center;">文本的扩容</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">案例：圣女贞德日版ISO：PSP_GAME\SYSDIR\boot.bin 文件<span style=" color: #00F;">日文文本：</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D140,10,ターン終了</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D14B,6,部隊表</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D152,4,戦況</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D157,4,中断</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D15C,6,ロード</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D163,10,オプション</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D16E,10,（クリア）</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">汉化文本： <span style=" color: #000;">0010D140,10, 回合結束</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D14B,6,部隊表</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D152,4,戦況</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">0010D157,4,中断</p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">0010D15C,6,讀 取</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D163,10, 選 項</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D16E,10,（CLEAR）</p><p style="text-indent: 0pt;text-align: left;"><span><img width="98" height="117" alt="image" src="bluekiller_files/Image_014.jpg"/></span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">PSP上测试效果</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">问题：如何将战况和中断这2个文本上下对齐？<span style=" color: #000;">日文文本：</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D152,4,戦況</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D157,4,中断</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">显然战况和中断各占4个字节。如果采用下面的方法： 0010D152,4,戦 況</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D157,4,中 断</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">显然文本越界了，各超2个字节。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="630" height="70" alt="image" src="bluekiller_files/Image_015.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">我们用winhex来看看日文的boot.bin</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="630" height="70" alt="image" src="bluekiller_files/Image_016.jpg"/></span></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">我们用winhex来看看汉化的boot.bin</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">变化之处在于用20填充了不足，和文本的居中调整。战况和中断各4个字节被分隔符0A分隔，没有任何余地。如何进行扩容呢？由于汉化后长度缩短，我们用20填充，为此我们有机会利用这些20的空间来实现扩容。</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">答案：移动0A分隔符。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="630" height="70" alt="image" src="bluekiller_files/Image_017.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">我们用winhex来看看汉化的且移动了0A的boot.bin</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="100" height="116" alt="image" src="bluekiller_files/Image_018.jpg"/></span></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">呵呵，我们在战况和中断间插入了双字节空格8140，来达到对齐的目的，来看看psp上的演示效果。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">原先的文本offset也有了变化：<span style=" color: #00F;">汉化扩容后文本： </span>0010D140,10, 回合結束</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D14B,6,部隊表</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D152,6,<span style=" color: #000;">戦 況</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D159,6,<span style=" color: #000;">中 断</span></p><p class="s11" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D160,<span style=" color: #000;">6,讀 取</span></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D167,6,<span style=" color: #000;">選 項</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D16E,10,（CLEAR）</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">日文文本： <span style=" color: #000;">0010D140,10,ターン終了</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D14B,6,部隊表</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D152,4,<span style=" color: #000;">戦況</span></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D157,4,<span style=" color: #000;">中断</span></p><p class="s13" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">0010D15C,<span style=" color: #000;">6,ロード</span></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">0010D163,10,<span style=" color: #000;">オプション</span></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">0010D16E,10,（クリア）</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">我们可以看到 0010D152,6,戦 況</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0010D159,6,中 断</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">都增加了2个字节，也就是插入对齐用的双字节空格8140。达到了扩容的目的。注意的是：对照日文文本的offset和移动0A后的offset起始位置地址也相应地改变了。</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">后记：</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">这种情况适用于文件没有索引表的文件，如果有索引表，还得修改索引表地址，否则将不能被显示，怪物猎人2创建新人物的那个文件就采用了索引表，所以扩容更麻烦。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 8pt;padding-left: 65pt;text-indent: 0pt;text-align: center;">控制符的基本应用</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">WQ提供了强大的控制符应用方法，来解决诸如日文语序和中文语序颠倒的问题，还有其他诸如颜色控制等等，都可以借用控制符来导出进行修整。如何鉴别控制符的用途，还需要自己深入研究。这里我们讲解一下最简单的换行控制符的应用，可以解决日文语序和中文语序颠倒的问题。我们还是以圣女的    ST1020AB.BIN.txt为例子。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">控制符（换行符）应用</p><p style="text-indent: 0pt;text-align: left;"><span><img width="645" height="212" alt="image" src="bluekiller_files/Image_019.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">我们先来看看圣女的剧情文本ST1020AB.BIN.txt在使用控制符（换行符）后2个文本的区别。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: justify;">采用控制符（换行符）以后，优势非常明显，没有采用换行符的情况下，翻译是逐句翻译，上下文可能会出现语序颠倒的情况，当采用换行符以后，有经验的翻译可以移动换行符在本句中的位置，达到符合中国人习惯的语序。</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">控制符的识别</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">控制符的识别，老程序员靠经验就能识别，新手需要通过摸索来获得控制符的含义。就拿圣女的剧情文本ST1020AB.BIN.txt，我们用winhex来看看ST1020AB.BIN</p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="632" height="178" alt="image" src="bluekiller_files/Image_020.jpg"/></span></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">OK！知道了换行符的16进制代码是0A,我们就可以利用wq提供的控制符脚本代码进行编写控制符转换了。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="259" height="97" alt="image" src="bluekiller_files/Image_021.jpg"/></span></p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Wq控制符码表：</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">导出：</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">打开记事簿，左边填写0A，右边填写BR，（br其实是网页的硬回车，写过网页的人都知道，当然也可以</p><p style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">换成你喜欢的文字），导出后的结果就是： <span style=" color: #F00;">0000198E,29,知ってるよ{BR}失敗したみたいだね</span>导入：</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">左右颠倒一下。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">呵呵，是不是很简单？新手可能有些困惑，但是汉化谁不是从新手一点点开始积累经验，成为老鸟？多练多实践吧。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 8pt;padding-left: 65pt;text-indent: 0pt;text-align: center;">GIM 图形格式破解</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="115" height="115" alt="image" src="bluekiller_files/Image_022.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">GIM图形格式是sony公司开发的PSP图形格式，GIM格式的版本很多，目前最新的GIM格式已经是1.40版，前段时间的游戏王使用的是1.10版本，圣女贞德采用1.10、1.20、1.30版本，鉴于目前GIM格式图像还没有图形浏览器和编辑器支持，汉化只能将GIM图形数据转换为bmp格式的图像，然后用photoshop或者   fireworks进行编辑后，重新导入GIM，达到汉化的目的。我们将以圣女贞德的GIM图形AF041_00.GIM   作为样本进行介绍，该图形在PSP_GAME\USRDIR\DATA\AS4075目录中，没有的，请下载本贴中的演示程</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">序。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">首先我们要了解的是bmp图形格式的结构。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 65pt;text-indent: 0pt;line-height: 12pt;text-align: center;">BMP图像格式结构表</p><p class="s14" style="padding-left: 56pt;text-indent: 0pt;line-height: 11pt;text-align: center;">偏移量 位数 英文解释 中文解释</p><table style="border-collapse:collapse;margin-left:63.9421pt" cellspacing="0"><tr style="height:10pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0000h-0001h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">2</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">bytes</p></td><td style="width:75pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:82pt"><p class="s15" style="padding-left: 25pt;text-indent: 0pt;line-height: 9pt;text-align: left;">BMP文件标识</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0002h-0005h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:75pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">file size</p></td><td style="width:82pt"><p class="s15" style="padding-left: 25pt;text-indent: 0pt;line-height: 9pt;text-align: left;">整个文件容量</p></td></tr><tr style="height:10pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0006h-0009h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:75pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">reserved</p></td><td style="width:82pt"><p class="s15" style="padding-left: 25pt;text-indent: 0pt;line-height: 9pt;text-align: left;">保留</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:63.9421pt" cellspacing="0"><tr style="height:19pt"><td style="width:62pt"><p class="s15" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">000Ah-000Dh</p></td><td style="width:17pt"><p class="s15" style="padding-top: 3pt;padding-right: 2pt;text-indent: 0pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-top: 3pt;padding-left: 2pt;text-indent: 0pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-top: 3pt;padding-left: 9pt;text-indent: 0pt;text-align: left;">bmp data offset</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">图像数据块开始位置（start</p><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">offset）</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">000Eh-0011h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">bmp head size</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图信息头</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0012h-0015h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">width</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的宽度</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0016h-0019h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">height</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的高度</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">001Ah-001Bh</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">word</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">planes</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的位面数</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">001Ch-001Dh</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">word</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">bits per pixel</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的信息头</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">001Eh-0021h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">compression</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的压缩</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0022h-0025h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">bitmap data size</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图数据块容量</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0026h-0029h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Hresolution</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">水平分辨率</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">002Ah-002Dh</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Vresolution</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">垂直分辨率</p></td></tr><tr style="height:11pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">002Eh-0031h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">colors</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">位图的颜色数</p></td></tr><tr style="height:10pt"><td style="width:62pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0032h-0035h</p></td><td style="width:17pt"><p class="s15" style="padding-right: 2pt;text-indent: 0pt;line-height: 9pt;text-align: right;">1</p></td><td style="width:34pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">dword</p></td><td style="width:91pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Important colors</p></td><td style="width:122pt"><p class="s15" style="padding-left: 9pt;text-indent: 0pt;line-height: 9pt;text-align: left;">重要颜色数</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:63.9421pt" cellspacing="0"><tr style="height:10pt"><td style="width:49pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0036h</p></td><td style="width:69pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">N*4 bytes</p></td><td style="width:75pt"><p class="s15" style="padding-left: 4pt;text-indent: 0pt;line-height: 9pt;text-align: left;">palette</p></td><td style="width:68pt"><p class="s15" style="padding-left: 20pt;text-indent: 0pt;line-height: 9pt;text-align: left;">调色板</p></td></tr><tr style="height:10pt"><td style="width:49pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">N*4+1</p></td><td style="width:69pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">xx bytes</p></td><td style="width:75pt"><p class="s15" style="padding-left: 4pt;text-indent: 0pt;line-height: 9pt;text-align: left;">bitmap data</p></td><td style="width:68pt"><p class="s15" style="padding-left: 20pt;text-indent: 0pt;line-height: 9pt;text-align: left;">图像数据区</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">GIM 图形文件结构表</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="493" height="538" alt="image" src="bluekiller_files/Image_023.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">使用winhex或ue打开AF041_00.GIM文件，结构如下。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:82.503pt" cellspacing="0"><tr style="height:12pt"><td style="width:70pt"><p class="s16" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">AF041_00.GIM</p></td><td style="width:103pt"><p class="s16" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">文件结构</p></td><td style="width:89pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:11pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0000h-002Fh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;padding-right: 36pt;text-indent: 0pt;line-height: 9pt;text-align: center;">48字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Header</p></td></tr><tr style="height:11pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0030h-007Fh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;padding-right: 36pt;text-indent: 0pt;line-height: 9pt;text-align: center;">80字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Image header</p></td></tr><tr style="height:11pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">0080h-407Fh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;text-indent: 0pt;line-height: 9pt;text-align: left;">16384字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">ImageData</p></td></tr><tr style="height:11pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">4080h-40CFh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;padding-right: 36pt;text-indent: 0pt;line-height: 9pt;text-align: center;">80字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Palette header</p></td></tr><tr style="height:11pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">40D0h-44CFh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;text-indent: 0pt;line-height: 9pt;text-align: left;">1024字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Palette</p></td></tr><tr style="height:10pt"><td style="width:70pt"><p class="s15" style="padding-left: 2pt;text-indent: 0pt;line-height: 9pt;text-align: left;">44D0h-451Bh</p></td><td style="width:103pt"><p class="s15" style="padding-left: 38pt;padding-right: 36pt;text-indent: 0pt;line-height: 9pt;text-align: center;">76字节</p></td><td style="width:89pt"><p class="s15" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">FileData</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">ok！数据分析清楚后开始撰写bmp文件头：</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">bmp标识</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D <span style=" color: #00F;">36 44 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">bmp标识+bmp文件长度</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">注：文件长度获得：看上表，bmp头文件54字节+调色板（256色）1024字节+图像数据16384字节=17462字节（10进制）=4436字节  （16进制）</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">42 4D 36 44 00 00 <span style=" color: #00F;">00 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">bmp标识+bmp文件长度+保留</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 <span style=" color: #00F;">36 04 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">注：图像数据开始位置=bmp文件头54字节+256色调色板1024字节=1078字节（10进制）=436字节（16进制）</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 <span style=" color: #00F;">28 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 <span style=" color: #00F;">80 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度注：图形宽度在AF041_00.GIM  的0048h，即10进制128像素。</p><p class="s3" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 <span style=" color: #00F;">80 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度注：图形高度在AF041_00.GIM  的004Ah，即10进制128像素。</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 <span style=" color: #00F;">01 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数注：位面数 01 00 照抄可以了。</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 <span style=" color: #00F;">08 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">注：图像信息头：16色-4 ，256色-8，16兆色-16，24兆色-18，32兆色-32。</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头+压缩</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">注：压缩：无压缩，全填00。</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00 <span style=" color: #00F;">00 40 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头+压缩+图像数据长度</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">注：图像数据长度：上表中16384字节=4000字节（16进制）。</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00 00 40 00 00 <span style=" color: #00F;">00 00 00 00 00 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头+压缩+图像数据长度+水平分辨率+垂直分辨率</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00 00 40 00 00 00 00 00 00 00 00 00 00 <span style=" color: #00F;">00 01 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头+压缩+图像数据长度+水平分辨率+垂直分辨率+颜色数</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">注：颜色数：256色=100H</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00 00 40 00 00 00 00 00 00 00 00 00 00 00 01 00 00 <span style=" color: #00F;">00 00 00 00</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">bmp标识+bmp文件长度+保留+图像数据开始位置+windows操作系统标识+图像宽度+图像高度+位面数+图像信息头+压缩+图像数据长度+水平分辨率+垂直分辨率+颜色数+重要颜色数</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">注：无</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">OK！bmp文件头写好了：</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">42 4D 36 44 00 00 00 00 00 00 36 04 00 00 28 00 00 00 80 00 00 00 80 00 00 00 01 00 08 00</p><p class="s3" style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">00 00 00 00 00 40 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 00 00 00</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">用winhex或ue新建一个16进制文件，写入上面的文件头，把gim的调色板1024字节复制过来，紧接bmp文件头，下面就是图像数据16384字节了，完成后另存为bmp即可现在可以用图像浏览器观看了。</p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="115" height="114" alt="image" src="bluekiller_files/Image_024.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">晕，图像是对了，但是出现颠倒和颜色不对。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">原来bmp和gim的描绘方式不同，我们需要纠正一下，询问了aeolusc大大，提供了经典的解决方案，高度置于负数 80 FF FF FF，我们再来看一下。</p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="115" height="114" alt="image" src="bluekiller_files/Image_025.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">罗杰的衣服颜色怎么蓝了？原来GIM的颜色通道是BGRA，我们需要将调色板的256组BGRA的“B&quot;和”</p><p style="padding-bottom: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">R“对换一下成为RGBA，这个用手工的话要死人的，还是写个程序转换吧，然后再来看看</p><p style="padding-left: 9pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><span><img width="13" height="14" alt="image" src="bluekiller_files/Image_026.jpg"/></span></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">总算写完了，累死了。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">最后，修改好的bmp导入，可采用上诉逆序的方法导入。下面的GIMtoBMP演示程序，可以帮助你了解破解的过程！</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="589" height="343" alt="image" src="bluekiller_files/Image_027.jpg"/></span></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">gim格式版本很多，本方法不能通用，具体情况还需具体分析，破解前还是要用winhex和ue看一下结构再下手。</p><p class="s7" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_028.png"/></span> <span class="s8">gimtools演示程序.rar</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s5" style="padding-top: 3pt;padding-left: 65pt;text-indent: 0pt;text-align: center;">GIM 图像格式破解 第二篇</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">上一讲中我们提到的是最基本的GIM图形格式，其图形数据区在转为bmp图像格式时，可以直接提取GIM的imagedata，也就是说，此种格式的GIM图像数据区的描绘方式和bmp的描绘方式相同，即在宽度范围内从左至右一直描绘到图像宽度结束。而本讲提出的问题是当GIM采用16x8或16x16的描绘方式时，如果采用上面的直接提取imagedata方式导入bmp，则会出现贴图错误。下面我们来分析一下16x8描绘的原      理。我们以游戏王的t_window0026.gim为例子。它的几何尺寸为64x32像数。标准的16x8存储描绘方</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">式。本次演示程序可在下面下在，1.1版本为对16x8进行处理，1.2版针对t_window0026.gim的16x8存储描绘方式进行了处理。大家可以打开看一下，加深理解。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="395" height="242" alt="image" src="bluekiller_files/Image_029.jpg"/></span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">我们来看看实际情况图。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">下面这张使用1.1版本打开conv目录下的t_window0026.gim，这是图像数据未经16x8处理的</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="640" height="317" alt="image" src="bluekiller_files/Image_030.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="647" height="321" alt="image" src="bluekiller_files/Image_031.jpg"/></span></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">下面这张使用1.2版本打开conv目录下的t_window0026.gim，这是图像数据经16x8处理的</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">我们将未经16x8处理的t_window0026.gim放大10倍来看，很明显图像分成了4列，对照上面的描绘方式图，大家就不能难理解了。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="484" height="356" alt="image" src="bluekiller_files/Image_032.jpg"/></span></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 12pt;text-align: left;">我们通过提取t_window0026.gim的图像数据区共2048个字节，完成描绘16x8存储小块需要2048/(16x8)</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 11pt;text-align: left;">=16块，再来看看t_window0026.gim的图形尺寸，64x32像素，即而完成</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">宽度一次描绘需要64个字节。而完成一次高度描绘需要8个字节，那么总计完成一次以宽度为单位描绘则需要64x8=512字节。那么图形数据2048需要描绘几次才能完成呢？答案2048/512=4次。我们再来看看下面的数据区重新组合演示。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="636" height="424" alt="image" src="bluekiller_files/Image_033.jpg"/></span></p><p style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">上图就是从gim文件中提取2048字节的图形数据区块的1/4数据快（512字节）转bmp数据块512字节的演示图，其他3块（512字节）的方法相同，大家也看到，这种重新排列的方法靠手动调整是不可能实现的，现在仅仅只有2kb的数据，而目前已知的最大gim数据区有128kb。为此还是需要编程来完成数据的重整。</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 80%;text-align: left;">ps：如果gim图像尺寸是128x32呢？呵呵，这种算法只要在上面的算法上改进一下即可，1.3版演示程序可以看conv目录128x32的gim。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s8" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 188%;text-align: left;"><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_034.png"/></span><span class="s7"> </span>gimtools 1.2演示程序.rar<span class="s10"> </span><span><img width="14" height="14" alt="image" src="bluekiller_files/Image_035.png"/></span><span class="s17"> </span>gimtools1.3演示程序.rar</p></body></html>
